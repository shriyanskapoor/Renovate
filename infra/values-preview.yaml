###
# Global variables (You probably won't need to change these)
###
global:
  domain: "junipersquare.us"
  aws:
    accountId: "847118582397"
    region: us-west-2
    vpcId: "vpc-00e00fcc83fdcdb72"
    vpcCidr: "10.91.0.0/16"
    vpcPrivateSubnetIds:
      - subnet-0b22e1ab4690c456c
      - subnet-02a9d5f74efd7b6a2
      - subnet-05874cda8f05811d2
    eks:
      oidcProviderId: "10DC0C84B5573E3BD82DBF31D968C227"
  labels:
    app: fund-admin
    component: frontend
    team: tbd
  crossplane:
    configName: crossplane-provider-config

###
# Used for naming resources generated by this Helm chart.
###
fullnameOverride: FRONTEND_SERVICE_NAME

deployments:
  frontend:
    containerPorts:
      http:
        port: 80
        protocol: TCP
    autoscaling:
      enabled: true
      type: hpa
      minReplicas: 2
      maxReplicas: 10
      targetCPUUtilizationPercentage: 80
    image:
      repository: "{{ .Values.global.image.repository }}"
      tag: "{{ .Values.global.image.tag }}"
      pullPolicy: Always
    service:
      enabled: true
      type: ClusterIP
      port: 80
      portName: http
      targetPort: http
    resources:
      limits:
        memory: 768Mi
      requests:
        cpu: 200m
        memory: 768Mi
    ingress:
      external:
        enabled: true
        className: nginx-external
        annotations:
          ingress.kubernetes.io/force-ssl-redirect: "true"
          external-dns.alpha.kubernetes.io/hostname: "{{ .Values.fullnameOverride }}-pr{{ .Values.global.github.prNumber }}.{{ .Values.global.domain }}."
          nginx.ingress.kubernetes.io/configuration-snippet: |
            add_header X-Frame-Options "sameorigin";
            add_header X-Content-Type-Options nosniff;
            add_header Referrer-Policy 'same-origin';
            add_header Permissions-Policy "accelerometer=(), camera=(), geolocation=(), gyroscope=(), magnetometer=(), microphone=(), payment=(), usb=()";
        hosts:
          - host: "{{ .Values.fullnameOverride }}-pr{{ .Values.global.github.prNumber }}.{{ .Values.global.domain}}"
            paths:
              - path: /
                pathType: Prefix
        tls:
          - secretName: wildcard-junipersquare-us-tls
            hosts:
              - "{{ .Values.fullnameOverride }}-pr{{ .Values.global.github.prNumber }}.{{ .Values.global.domain }}"

serviceAccount:
  create: true

iam:
  create: true
  policy: |
    {
      "Version": "2012-10-17",
      "Statement":
      [
        {
        }
      ]
    }
